(this.webpackJsonpreact_redux5_1=this.webpackJsonpreact_redux5_1||[]).push([[0],[,,,,,function(t,e,s){t.exports=s(13)},,,,,,function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s.n(i),r=s(1),a=s.n(r);class o{static ContinueLoading(){var t=window.temp;t&&("/api/update"===t.url?d.getDataById(t,window.textId,t.url):d.getData(t,t.url)),this.MessageOff()}static MessageOff(){document.getElementById("loginMessage").style.display="none"}static MessageOn(t){window.temp=t,document.getElementById("loginMessage").style.display="block",document.getElementById("login").style.display="block",r.render(i.createElement("h1",null,"LOGIN PLEASE"),document.querySelector("#loginMessage"))}}class l extends i.Component{constructor(t){super(t),this.url=void 0,this.corsAddress=void 0,this.state={style:"submitStyle"},this.credos=void 0,this.loginErr=()=>{document.cookie="rsse_auth = false",console.log("Login error")},this.loginOk=()=>{document.cookie="rsse_auth = true",console.log("Login ok"),this.setState({style:"submitStyleGreen"}),o.ContinueLoading(),setTimeout(()=>{document.getElementById("login").style.display="none"},1500)},this.submit=this.submit.bind(this),this.url="/account/login",this.credos=d.credos,this.corsAddress=d.corsAddress,this.url=this.corsAddress+this.url,document.getElementById("login").style.display="block"}submit(t){t.preventDefault();var e="test_e",s="test_p",i=document.getElementById("email"),n=document.getElementById("password");i&&(e=i.value),n&&(s=n.value),window.fetch(this.url+"?email="+String(e)+"&password="+String(s),{credentials:this.credos}).then(t=>t.ok?this.loginOk():this.loginErr())}componentWillUnmount(){}render(){return i.createElement("div",null,i.createElement("div",{id:this.state.style},i.createElement("input",{type:"checkbox",id:"loginButton",className:"regular-checkbox",onClick:this.submit}),i.createElement("label",{htmlFor:"loginButton"},"\u0412\u043e\u0439\u0442\u0438")),"\xa0\xa0\xa0\xa0",i.createElement("span",null,i.createElement("input",{type:"text",id:"email",name:"email"})),"\xa0\xa0\xa0\xa0",i.createElement("span",null,i.createElement("input",{type:"text",id:"password",name:"password"})))}}class d{static getData(t,e){o.MessageOff(),e=this.corsAddress+e;try{window.fetch(e,{credentials:this.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(e=>{t.mounted&&t.setState({data:e})}).catch(e=>o.MessageOn(t))}catch(s){console.log("Loader try-catch: 1")}}static getDataById(t,e,s){o.MessageOff(),s=this.corsAddress+s;try{window.fetch(s+"?id="+String(e),{credentials:this.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(e=>{t.mounted&&t.setState({data:e})}).catch(e=>o.MessageOn(t))}catch(i){console.log("Loader try-catch: 2")}}static postData(t,e,s){var i=String(Date.now());o.MessageOff(),s=this.corsAddress+s;try{window.fetch(s,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:e,credentials:this.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(e=>t.setState({data:e,time:i})).catch(e=>o.MessageOn(t))}catch(n){console.log("Loader try-catch: 3")}}static deleteDataById(t,e,s,i){o.MessageOff(),s=this.corsAddress+s;try{window.fetch(s+"?id="+String(e)+"&pg="+String(i),{method:"DELETE",credentials:this.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(e=>{t.mounted&&t.setState({data:e})}).catch(e=>o.MessageOn(t))}catch(n){console.log("Loader try-catch: 2")}}}d.credos="same-origin",d.corsAddress="";class c extends i.Component{constructor(t){super(t),this.url=void 0,this.formId=void 0,this.mounted=void 0,this.state={data:null},this.mainForm=void 0,this.url="/api/read",this.formId=null,this.mounted=!0,this.mainForm=i.createRef()}componentDidMount(){this.formId=this.mainForm.current,d.getData(this,this.url)}componentDidUpdate(){r.render(i.createElement("div",null,i.createElement(m,{listener:this,formId:this.formId,jsonStorage:!0,id:!0})),document.querySelector("#searchButton1")),document.getElementById("header").style.backgroundColor="#e9ecee"}componentWillUnmount(){this.mounted=!1}render(){var t=[];if(null!=this.state.data)for(var e=0;e<this.state.data.genresNamesCS.length;e++)t.push(i.createElement(h,{key:"checkbox ".concat(e),id:e,jsonStorage:this.state.data,listener:!0,formId:!0}));return i.createElement("div",null,i.createElement("form",{ref:this.mainForm,id:"dizzy"},t),i.createElement("div",{id:"messageBox"},null!=this.state.data&&null!=this.state.data.textCS&&i.createElement(u,{formId:this.formId,jsonStorage:this.state.data,listener:!0,id:!0})))}}class h extends i.Component{render(){return i.createElement("div",{id:"checkboxStyle"},i.createElement("input",{name:"chkButton",value:this.props.id,type:"checkbox",id:this.props.id,className:"regular-checkbox",defaultChecked:!1}),i.createElement("label",{htmlFor:this.props.id},(t=>this.props.jsonStorage.genresNamesCS[t])(this.props.id)))}}class u extends i.Component{constructor(t){super(t),this.hideMenu=this.hideMenu.bind(this)}hideMenu(t){if("none"!==this.props.formId.style.display)return this.props.formId.style.display="none",void(document.getElementById("login").style.display="none");this.props.formId.style.display="block"}render(){return this.props.jsonStorage&&0!==Number(this.props.jsonStorage.savedTextId)&&(window.textId=Number(this.props.jsonStorage.savedTextId)),i.createElement("span",null,null!=this.props.jsonStorage?null!=this.props.jsonStorage.textCS?i.createElement("span",null,i.createElement("div",{id:"songTitle",onClick:this.hideMenu},this.props.jsonStorage.titleCS),i.createElement("div",{id:"songBody"},this.props.jsonStorage.textCS)):"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0430\u043d\u0440":"")}}class m extends i.Component{constructor(t){super(t),this.url=void 0,this.submit=this.submit.bind(this),this.url="/api/read"}submit(t){t.preventDefault(),document.getElementById("login").style.display="none";var e={CheckedCheckboxesJS:new FormData(this.props.formId).getAll("chkButton").map(t=>Number(t)+1)},s=JSON.stringify(e);d.postData(this.props.listener,s,this.url),document.getElementById("header").style.backgroundColor="slategrey"}componentWillUnmount(){}render(){return i.createElement("div",{id:"submitStyle"},i.createElement("input",{form:"dizzy",type:"checkbox",id:"submitButton",className:"regular-checkbox",onClick:this.submit}),i.createElement("label",{htmlFor:"submitButton"},"\u041f\u043e\u0438\u0441\u043a"))}}class p extends i.Component{constructor(t){super(t),this.url=void 0,this.formId=void 0,this.mounted=void 0,this.state={data:null,time:null},this.mainForm=void 0,this.url="/api/update",this.formId=null,this.mounted=!0,this.mainForm=i.createRef()}componentDidMount(){this.formId=this.mainForm.current,d.getDataById(this,window.textId,this.url)}componentWillUnmount(){this.mounted=!1}render(){var t=[];if(null!=this.state&&null!=this.state.data)for(var e=0;e<this.state.data.genresNamesCS.length;e++)t.push(i.createElement(g,{key:"checkbox "+e+this.state.time,id:e,jsonStorage:this.state.data,listener:!0,formId:!0}));return i.createElement("div",null,i.createElement("form",{ref:this.mainForm,id:"dizzy"},t,null!=this.state.data&&i.createElement(v,{listener:this,formId:this.formId,jsonStorage:this.state.data,id:!0})),null!=this.state.data&&null!=this.state.data.textCS&&i.createElement(b,{formId:this.formId,jsonStorage:this.state.data,listener:!0,id:!0}))}}class g extends i.Component{render(){var t="checked"===this.props.jsonStorage.isGenreCheckedCS[this.props.id];return i.createElement("div",{id:"checkboxStyle"},i.createElement("input",{name:"chkButton",value:this.props.id,type:"checkbox",id:this.props.id,className:"regular-checkbox",defaultChecked:t}),i.createElement("label",{htmlFor:this.props.id},(t=>this.props.jsonStorage.genresNamesCS[t])(this.props.id)))}}class b extends i.Component{constructor(t){super(t),this.getCookie=()=>{var t=document.cookie.match(new RegExp("(?:^|; )"+"rsse_auth".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));null!=t&&"false"!==decodeURIComponent(t[1])||this.hideMenu("something_stuff")},this.inputText=t=>{var e=t.target.value;this.props.jsonStorage.textCS=e,this.forceUpdate()},this.hideMenu=this.hideMenu.bind(this)}componentDidMount(){this.getCookie()}hideMenu(t){"none"===this.props.formId.style.display?this.props.formId.style.display="block":this.props.formId.style.display="none"}render(){return i.createElement("div",null,i.createElement("p",null),null!=this.props.jsonStorage?null!=this.props.jsonStorage.textCS?i.createElement("div",null,i.createElement("h1",{onClick:this.hideMenu},this.props.jsonStorage.titleCS),i.createElement("h5",null,i.createElement("textarea",{name:"msg",cols:66,rows:30,form:"dizzy",value:this.props.jsonStorage.textCS,onChange:this.inputText}))):"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0441\u043d\u044e":"loading..")}}class v extends i.Component{constructor(t){super(t),this.url=void 0,this.submit=this.submit.bind(this),this.url="/api/update"}submit(t){t.preventDefault();var e=new FormData(this.props.formId),s={CheckedCheckboxesJS:e.getAll("chkButton").map(t=>Number(t)+1),TextJS:e.get("msg"),TitleJS:this.props.jsonStorage.titleCS,SavedTextId:window.textId},i=JSON.stringify(s);d.postData(this.props.listener,i,this.url)}componentWillUnmount(){}render(){return i.createElement("div",{id:"submitStyle"},i.createElement("input",{type:"checkbox",id:"submitButton",className:"regular-checkbox",onClick:this.submit}),i.createElement("label",{htmlFor:"submitButton"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}var y=p,f=s(2),E=s.n(f),S=s(3);class k extends i.Component{constructor(t){super(t),this.url=void 0,this.formId=void 0,this.mounted=void 0,this.state={data:null,time:null},this.mainForm=void 0,this.url="/api/create",this.formId=null,this.mounted=!0,this.mainForm=i.createRef()}componentDidMount(){this.formId=this.mainForm.current,d.getData(this,this.url)}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){var t=0;this.state.data&&(t=Number(this.state.data.savedTextId)),0!==t&&(window.textId=t)}render(){var t=[];if(null!=this.state.data&&null!=this.state.data.genresNamesCS)for(var e=0;e<this.state.data.genresNamesCS.length;e++)t.push(i.createElement(x,{key:"checkbox ".concat(e).concat(this.state.time),id:e,jsonStorage:this.state.data,listener:!0,formId:!0}));var s=this.state.data;return s&&(s.textCS||(s.textCS=""),s.titleCS||(s.titleCS="")),i.createElement("div",null,i.createElement("form",{ref:this.mainForm,id:"dizzy"},t,null!=this.state.data&&i.createElement(I,{listener:this,formId:this.formId,id:!0,jsonStorage:!0})),null!=this.state.data&&i.createElement(C,{formId:this.formId,jsonStorage:s,listener:!0,id:!0}))}}class x extends i.Component{render(){var t="checked"===this.props.jsonStorage.isGenreCheckedCS[this.props.id];return i.createElement("div",{id:"checkboxStyle"},i.createElement("input",{name:"chkButton",value:this.props.id,type:"checkbox",id:this.props.id,className:"regular-checkbox",defaultChecked:t}),i.createElement("label",{htmlFor:this.props.id},(t=>this.props.jsonStorage.genresNamesCS[t])(this.props.id)))}}i.Component;class C extends i.Component{constructor(...t){super(...t),this.inputText=t=>{var e=t.target.value;this.props.jsonStorage.textCS=e,this.forceUpdate()},this.inputTitle=t=>{var e=t.target.value;this.props.jsonStorage.titleCS=e,this.forceUpdate()}}render(){return i.createElement("div",null,i.createElement("p",null),null!=this.props.jsonStorage?i.createElement("div",null,i.createElement("h5",null,i.createElement("textarea",{name:"ttl",cols:66,rows:1,form:"dizzy",value:this.props.jsonStorage.titleCS,onChange:this.inputTitle})),i.createElement("h5",null,i.createElement("textarea",{name:"msg",cols:66,rows:30,form:"dizzy",value:this.props.jsonStorage.textCS,onChange:this.inputText}))):"loading..")}}class I extends i.Component{constructor(t){var e;super(t),e=this,this.url=void 0,this.corsAddress=void 0,this.findUrl=void 0,this.readUrl=void 0,this.requestBody=void 0,this.storage=[],this.state=void 0,this.btn=void 0,this.credos=void 0,this.cancel=t=>{t.preventDefault(),this.btn.style.display="none",this.requestBody=JSON.stringify({CheckedCheckboxesJS:[1],TextJS:"Stub",TitleJS:"Nirvana - In Bloom"}),d.postData(this.props.listener,this.requestBody,this.url)},this.finder=function(){var t=Object(S.a)(E.a.mark((function t(s,i){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"string"===typeof s&&(s=s.replace(/\r\n|\r|\n/g," "));try{n=window.fetch(e.findUrl+"?text="+s+" "+i,{credentials:e.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(t=>e.checkScanResult(t))}catch(r){console.log("Find when create: try-catch err")}return t.next=4,n;case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),this.checkScanResult=function(){var t=Object(S.a)(E.a.mark((function t(s){var i,n,r,a,o,l,d;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],void 0!==(n=s.res)){t.next=4;break}return t.abrupt("return");case 4:for(a in(r=Object.keys(n).map(t=>[Number(t),n[t]])).sort((function(t,e){return e[1]-t[1]})),r)i.push(r[a]);if(0!==i.length){t.next=9;break}return t.abrupt("return");case 9:o=0;case 10:if(!(o<i.length)){t.next=20;break}if(!(e.storage.length>=10)){t.next=13;break}return t.abrupt("continue",17);case 13:l=String(i[o][0]);try{d=window.fetch(e.readUrl+"?id="+l,{credentials:e.credos}).then(t=>t.ok?t.json():Promise.reject(t)).then(t=>e.getTitle(t))}catch(c){console.log("Find when create: try-catch err")}return t.next=17,d;case 17:o++,t.next=10;break;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getTitle=t=>{this.storage.push(t.res+"\r\n");var e=String(Date.now());t={genresNamesCS:this.storage,isGenreCheckedCS:[],textCS:JSON.parse(this.requestBody).TextJS},this.props.listener.setState({data:t,time:e})},this.submit=this.submit.bind(this),this.url="/api/create",this.state=0,this.credos=d.credos,this.corsAddress=d.corsAddress,this.findUrl=this.corsAddress+"/api/find",this.readUrl=this.corsAddress+"/api/read/title"}componentDidMount(){this.btn=document.getElementById("cancelButton"),this.btn.style.display="none"}submit(t){var e=this;return Object(S.a)(E.a.mark((function s(){var i,n,r,a,o,l;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.preventDefault(),e.btn.style.display="none",1!==e.state){s.next=6;break}return e.state=0,d.postData(e.props.listener,e.requestBody,e.url),s.abrupt("return");case 6:return i=new FormData(e.props.formId),n=i.getAll("chkButton").map(t=>Number(t)+1),r=i.get("msg"),a=i.get("ttl"),o={CheckedCheckboxesJS:n,TextJS:r,TitleJS:a},e.requestBody=JSON.stringify(o),e.storage=[],l=e.finder(r,a),s.next=16,l;case 16:if(!(e.storage.length>0)){s.next=20;break}return e.btn.style.display="block",e.state=1,s.abrupt("return");case 20:d.postData(e.props.listener,e.requestBody,e.url);case 21:case"end":return s.stop()}}),s)})))()}componentWillUnmount(){}render(){return i.createElement("div",{id:"submitStyle"},i.createElement("input",{type:"checkbox",id:"submitButton",className:"regular-checkbox"}),i.createElement("label",{htmlFor:"submitButton",onClick:this.submit},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),i.createElement("div",{id:"cancelButton"},i.createElement("input",{type:"checkbox",id:"submitButton",className:"regular-checkbox"}),i.createElement("label",{htmlFor:"submitButton",onClick:this.cancel},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}}var w=k;class j extends i.Component{constructor(t){super(t),this.url=void 0,this.mounted=void 0,this.logoutUrl=void 0,this.corsAddress=void 0,this.credos=void 0,this.state={data:null},this.click=t=>{t.preventDefault();var e=Number(t.target.id.slice(7)),s={pageNumber:this.state.data.pageNumber,navigationButtons:[e]},i=JSON.stringify(s);d.postData(this,i,this.url)},this.logout=t=>{t.preventDefault(),document.cookie="rsse_auth = false",window.fetch(this.logoutUrl,{credentials:this.credos}).then(t=>t.ok?console.log("Logout Ok"):console.log("Logout Err"))},this.redirect=t=>{t.preventDefault();var e=Number(t.target.id);this.props.listener.setState({id:e})},this.delete=t=>{t.preventDefault();var e=Number(t.target.id);console.log("You want to delete song with id: "+e),d.deleteDataById(this,e,this.url,this.state.data.pageNumber)},this.url="/api/catalog",this.mounted=!0,this.credos=d.credos,this.corsAddress=d.corsAddress,this.logoutUrl=this.corsAddress+"/account/logout"}componentWillUnmount(){this.mounted=!1}componentDidMount(){d.getDataById(this,1,this.url)}render(){if(!this.state.data)return null;for(var t=[],e=0;e<this.state.data.titlesAndIds.length;e++)t.push(i.createElement("tr",{key:"song "+e,className:"bg-warning"},i.createElement("td",null),i.createElement("td",null,i.createElement("button",{className:"btn btn-outline-light",id:this.state.data.titlesAndIds[e].item2,onClick:this.redirect},this.state.data.titlesAndIds[e].item1)),i.createElement("td",null,i.createElement("button",{className:"btn btn-outline-light",id:this.state.data.titlesAndIds[e].item2,onClick:this.delete},"\u274c"))));return i.createElement("div",{className:"row"},i.createElement("p",{style:{marginLeft:"12%"}},"\u0412\u0441\u0435\u0433\u043e \u043f\u0435\u0441\u0435\u043d: ",this.state.data.songsCount," \xa0 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ",this.state.data.pageNumber," \xa0"),i.createElement("p",null),i.createElement("p",null),i.createElement("table",{className:"table",id:"catalogTable"},i.createElement("thead",{className:"thead-dark "},i.createElement("tr",null,i.createElement("th",null),i.createElement("th",null,i.createElement("form",null,i.createElement("button",{id:"js-nav-1",className:"btn btn-info",onClick:this.click},"<\u041d\u0430\u0437\u0430\u0434"),"\xa0",i.createElement("button",{id:"js-nav-2",className:"btn btn-info",onClick:this.click},"\u0412\u043f\u0435\u0440\u0451\u0434>"),"\xa0",i.createElement("button",{id:"js-logout",className:"btn btn-outline-light",onClick:this.logout},"<LogOut>"))),i.createElement("th",null))),i.createElement("tbody",null,t)))}}var B=j;window.textId=0;class N extends i.Component{constructor(t){super(t),this.visibilityCss=void 0,this.visibilityFlag=void 0,this.menu=void 0,this.buttons=void 0,this.state={id:null},this.select=this.select.bind(this),this.visibilityCss=["act","pas","pas","pas"],this.visibilityFlag=[!0,!1,!1,!1],this.menu=["\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c","\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c","\u0421\u043e\u0437\u0434\u0430\u0442\u044c","\u041a\u0430\u0442\u0430\u043b\u043e\u0433"]}select(t){var e=Number(t.currentTarget.getAttribute("id").slice(5));1===e&&0===window.textId||(this.visibilityFlag.forEach((t,e)=>this.visibilityFlag[e]=!1),this.visibilityFlag[e]=!this.visibilityFlag[e],this.forceUpdate())}handleClick(t){t.preventDefault(),alert(t.currentTarget.tagName)}componentDidUpdate(){this.state.id&&this.setState({id:null}),this.visibilityFlag[0]||r.render(i.createElement("div",null),document.querySelector("#searchButton1"))}render(){this.state.id&&(this.visibilityFlag=[!1,!0,!1,!1],window.textId=this.state.id),this.visibilityFlag.forEach((t,e)=>this.visibilityFlag[e]?this.visibilityCss[e]="act":this.visibilityCss[e]="pas"),this.buttons=[];for(var t=0;t<4;t++)this.buttons.push(i.createElement("button",{key:"menu "+t,onClick:this.select,id:"menu "+String(t),className:this.visibilityCss[t]},this.menu[t]));return i.createElement("div",null,i.createElement("div",{id:"header"},this.buttons),!0===this.visibilityFlag[0]&&i.createElement("div",{id:"renderContainer1"},i.createElement(c,{data:!0})),!0===this.visibilityFlag[1]&&i.createElement("div",{id:"renderContainer"},i.createElement(y,{listener:!0,formId:!0,id:!0,jsonStorage:!0})),!0===this.visibilityFlag[2]&&i.createElement("div",{id:"renderContainer"},i.createElement(w,{data:!0,time:!0})),!0===this.visibilityFlag[3]&&i.createElement("div",{id:"renderContainer"},i.createElement(B,{listener:this})))}}N.defaultProps={visibilityCss:["act","pas","pas","pas"],visibilityFlag:[!0,!1,!1,!1],menu:["\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c","\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c","\u0421\u043e\u0437\u0434\u0430\u0442\u044c","\u041a\u0430\u0442\u0430\u043b\u043e\u0433"]},r.render(i.createElement(l,{listener:void 0,formId:!0,jsonStorage:!0,id:!0}),document.querySelector("#renderLoginForm"));s(11),s(12);console.log("start"),a.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.8951ccaf.chunk.js.map